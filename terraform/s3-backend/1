dry_run=0
function create_s3_bucket () {
	cd $(dirname $0)/kops-tf/terraform/s3-backend/
	terraform init && terraform plan -out s3-plan.yaml
	terraform apply s3-plan.yaml
}
function check_s3_bucket (){
	if aws s3api head-bucket --bucket "$S3_BUCKET" 2>/dev/null; then 
		echo "S3 bucket $S3_BUCKET exists=====;

	else 
		echo "Seems First time setup in your environment,So creating to preserve state bucket====="
		create_s3_bucket 
	fi
}
function create_base_nw () {
cd $(dirname $0)/kops-tf/terraform
if [ "$(terraform plan -detailed-exitcode)" -eq 0 ];then
	echo -n "No diff/changes since last execution...."
	exit 0




}

function kops_cluster () {

}
while getopts 'p' opt; do
    case "$opt" in
        p) dry_run=1 
		echo "setting dry_run to 1"
		;;
	a) create_base_nw ;;
        ?) echo "script usage: ./$(basename $0) -p for dry run" >&2
      	   exit 1
      ;;
    esac
done
if [ "$dry_run" -eq 1 ]; then
    set -v
    set -n
fi
ls -l
